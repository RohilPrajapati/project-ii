<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <script src="https://www.gstatic.com/charts/loader.js" type="text/javascript"></script>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" rel="stylesheet">
    <script crossorigin="anonymous" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <link href="../static/style.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />


</head>

<body>
    {% if response.message and not response.status %}
    <span class="alert-msg">
        {{response.message}}
    </span>
    {% endif %}
    <div class="row">
        <div class="col-5 bg-light">
            <form action="http://127.0.0.1:5000/" class="row m-3 justify-content-center" method="POST">
                <!-- <label for="algo">Algorithm:</label>
                <div class="input-group">
                    
                     <input  name="eqn" placeholder="Enter the Algo" type="text"
                        value="{{ request.form['eqn'] }}">
                    <select class="my-2 form-control" id="cars" name="algo">
                        <option value="volvo">Bisection Method</option>
                        <option value="saab">False Position Method</option>
                        <option value="fiat">Newton-Raphson Method</option>
                        <option value="audi">Fixed Point</option>
                    </select>
                </div> -->
                <div class="input-group">
                    <input class="my-2 form-control" name="eqn" placeholder="Enter the Equation" type="text"
                        value="{{ request.form['eqn'] }}">
                </div>

                <!-- <input type="text" class="col-12 my-2" name="eqn" placeholder="Enter the Equation"> -->
                <div class="input-group">
                    <input class="my-2 form-control" name="a" placeholder="Guess number 1" type="number"
                        value="{{ request.form['a'] }}">
                </div>
                <div class="input-group">
                    <input class="my-2 form-control" name="b" placeholder="Guess number 2" type="number"
                        value="{{ request.form['b'] }}">
                </div>

                <button class="btn btn-primary col-5" type="submit">Submit</button>

            </form>
            <div class="col-12">
                <table>
                    <thead>
                        <tr>
                            <th>Iteration</th>
                            <th>a</th>
                            <th>f(a)</th>
                            <th>b</th>
                            <th>f(b)</th>
                            <th>c</th>
                            <th>f(c)</th>
                            <th>Error</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for data in response['iteration'] %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ data['a'] }}</td>
                            <td>{{ data['f(a)'] }}</td>
                            <td>{{ data['b'] }}</td>
                            <td>{{ data['f(b)'] }}</td>
                            <td>{{ data['c'] }}</td>
                            <td>{{ data['f(c)'] }}</td>
                            <td>{{ data['error'] }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>

                </table>
                <div>
                    Therefore the root = {{ response['root'] }}
                </div>
            </div>
        </div>
        <div class="col-7">
            <div class="chart" id="chart_div"></div>
        </div>
    </div>
    <script>
        var response = JSON.parse('{{ response| tojson }}');
        data = response.iteration
        console.table(data)
        c = []
        c.push(['x', 'y'])
        for (row in data) {
            x_y = []
            console.log(row)
            x_int = data[row]['a'].toFixed(2);
            y_int = data[row]['f(a)'].toFixed(2);
            x_y.push(parseFloat(x_int))
            x_y.push(parseFloat(y_int))
            c.push(x_y)
            x_y = []
            // x_int = data[row]['b'].toFixed(2);
            // y_int = data[row]['f(b)'].toFixed(2);
            // x_y.push(parseFloat(x_int))
            // x_y.push(parseFloat(y_int))
            // c.push(x_y)
        }
        r = []
        for (row in data) {
            x_y = []
            // console.log(row)
            // x_int = data[row]['a'].toFixed(2);
            // y_int = data[row]['f(a)'].toFixed(2);
            // x_y.push(parseFloat(x_int))
            // x_y.push(parseFloat(y_int))
            // c.push(x_y)
            x_y = []
            x_int = data[row]['b'].toFixed(2);
            y_int = data[row]['f(b)'].toFixed(2);
            x_y.push(parseFloat(x_int))
            x_y.push(parseFloat(y_int))
            r.push(x_y)
        }
        console.table(r)
        r.reverse()
        console.table(r)
        c = c.concat(r)

        console.table(c)

        google.charts.load("current", { packages: ["corechart"] });
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable
                (c);

            var options = {
                legend: 'bottom',
                // vAxis: { minValue: -1000, maxValue: 1000 },
                // hAxis: { minValue: -1000, maxValue: 1000 },
                curveType: 'function',
                pointSize: 3,
                vAxis: {
                    0: {}, // Default vAxis
                    1: { position: 'right' } // Additional vAxis on the right
                }

            };

            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
            chart.draw(data, options);
        }


    </script>
</body>

</html>